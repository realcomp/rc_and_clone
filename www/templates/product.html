<ion-view>
	<ion-nav-title> {{ title  }} </ion-nav-title>
	<ion-content overflow-scroll="true" ng-controller='funcController'>
		<div ng-if="product" class="product__single-wrap">
			<div class="product__single-head">
				<h2 class="product__single-name">{{ showCatName }} {{ product.company_name }} {{ product.name }}</h2>
				<div class="product__single-info">
					<div class="product__single-info-left">
						<span class="product__single-helper"></span>
						<img ng-click="modalProduct.show()" ng-src="{{ product.images_array[0] }}">
						<ion-spinner icon="circles" class="loader"></ion-spinner>
					</div>
					<div class="product__single-info-right">
						<a ng-href="#" ng-class="(product.shopping_list==true) ? 'active' : ''" ng-click="addShoppingList(product)" href="#"><i class="icon ion-bag"></i>{{ product.slug }}</a>
						<a ng-href="#" ng-class="(product.product_list==true) ? 'active' : ''" ng-click="updateProductList(product)"><i class="icon ion-android-favorite-outline"></i>{{ linkSlug }}</a>
					</div>
				</div>
			</div>
			<div ng-init="productType(product)">  	
		  		<div ng-include="productTemplate.url"></div>
		 </div>
		 <ion-spinner class="product__single-reviews-spinner" icon="circles" ng-if="!reviews"></ion-spinner>
		 <div class="product__single-reviews-wrap" ng-if="reviews">

		 		<div class="product__single-reviews-rating product__single-wblock">
		 			<p class="product__single-reviews-rating-title">Оценки покупателей</p>
		 				<span class="product__single-reviews-rating" ng-repeat="i in arrayRating track by $index" ng-class="i ? 'rating-full' : 'rating-empty'">
		 					<i class="icon ion-android-star"></i>
		 				</span>
		 				<span class="product__single-reviews-text">{{ reviews.total_count }} {{ declension(reviews.total_count, ['оценка','оценки','оценок']); }}</span>
		 		</div>

		 		<div class="product__single-reviews-slider product__single-wblock">
		 			<div ng-if="reviews && reviews.total_count > 0" class="product__single-reviews-slider-head">
			 			<div class="product__single-slider-count">
			 				Отзыв {{ currentIndex }} из {{ reviews.total_count }}
				 		</div>
			 			<div class="product__single-slider-nav">
			 				<button ng-click="prevSlide()" ng-class="currentIndex == 1 ? 'button__disabled' : '' "><i class="icon ion-chevron-left"></i></button>
					  	<button ng-click="nextSlide()" ng-class="currentIndex == reviews.total_count ? 'button__disabled' : '' "><i class="icon ion-chevron-right"></i></button>
			 			</div>
		 			</div>
				 	<ion-slide-box show-pager="false" ng-if="reviews" on-slide-changed="slideHasChanged($index)">            
			      <ion-slide ng-repeat="review in reviews.items">
				      <div class="product__single-reviews-slider-body">
				      	<div class="product__single-reviews-slider-top">
				      		<div class="product__slider-avatar">
				      			<span ng-if="!review.user.avatar">Нет фото</span>
				      			<img ng-if="review.user.avatar" ng-src="{{ review.user.avatar }}">
				      		</div>
				      		<div class="product__slider-in">
				      			<p class="product__slider-name">{{ review.user.name }}</p>
				      			<p class="product__slider-create">{{ review.created_date  | date:'dd-MM-yyyy' }}</p>
				      		</div>
				      		<div class="product__slider-rate">
				      			{{ reviewRatingGenerator(review.mark) }}
				      			<span class="product__slider-rating" ng-repeat="i in arrayRating track by $index" ng-class="i ? 'rating-full' : 'rating-empty'">
		 									<i class="fa fa-star"></i>
		 								</span>
				      		</div>
				      	</div>
				      	<div class="product__single-reviews-slider-bottom">
				      		<p>{{ review.text }}</p>
				      		<p>
				      			<strong>Достоинства: </strong>
							  		{{ review.advantages }}
							  	</p>
				      		<p>
				      			<strong>Недостатки: </strong>
							  		{{ review.disadvantages }}
							  	</p>
				      	</div>
							</div> 
			      </ion-slide>
		 		</div>
				<button ng-click="showReview(product);" class="product__single-add-reviews">Написать отзыв</button>
		 </div>
		 <div class="product__single-prop">
		 	<div class="product__single-prop-main">
		 		<div ng-repeat="m_prop in properties">
		 			<h4 class="product__single-prop-ititle">{{ m_prop.name }}</h4>
			 		<table class="product__single-prop-table">
			 			<tr ng-repeat="prop in m_prop.properties">
			 				<td class="product__single-prop-td-1">{{ prop.name }}</td>
			 				<td class="product__single-prop-td-2">{{ prop.value }}</td>
			 			</tr>
			 		</table>
		 		</div>
		 	</div>
		 </div>
	  </div>
	  <div class="overlay__load" ng-if="overlayload">
	  	<ion-spinner icon="lines"></ion-spinner>
	  </div>
	</ion-content>
</ion-view>